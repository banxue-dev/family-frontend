
  <div class="layui-form" lay-filter="gold_personalInfo_add_form" id="gold_personalInfo_add_form"style="padding: 20px 30px 0 0;">
    <input type="hidden" name="customerId">
    <div class="layui-form-item">
      <label class="layui-form-label">大盘状态</label>
        <div class="layui-input-block">
        <input type="radio" name="openStatus" value="0" title="开盘">
        <input type="radio" name="openStatus" value="1" title="停盘" >
        <input type="radio" name="openStatus" value="2" title="自动" checked="">
      </div>
    </div><div class="layui-form-item">
      <label class="layui-form-label">客户名称</label>
      <div class="layui-input-inline">
        <script type="text/html" template>
          <input type="text" name="customerName" value="" lay-verify="required" placeholder="请输入客户名称" autocomplete="off" class="layui-input">
        </script>
      </div>
    </div>
    <input type="hidden" name="hideOrgCode" id="hideOrgCode">
    
    <div class="layui-form-item">
      <label class="layui-form-label">选择组织</label>
      <div class="layui-input-inline">
       <script type="text/html" template lay-type='post' lay-url="{{layui.setter.backuprequesturl}}org/v1.0/api/getOrgList" 
        lay-done="layui.$('#userAddOrgCode').val(layui.$('#hideOrgCode').val());layui.form.render('select', 'gold_personalInfo_add_form');">

          <select name="orgCode" id="userAddOrgCode" lay-filter="selectOrg">
            {{# layui.each(d.data, function(index, item){ }}
                  <option value='{{item.orgCode}}'  >{{item.orgName}}</option>
                
            {{#  }); }}

            
         </select>
        </script>
      </div>
    </div>
    <div class="layui-form-item">
      <label class="layui-form-label">联系人</label>
      <div class="layui-input-inline">
        <script type="text/html" template>
          <input type="text" name="customerContactPersonal" value="" lay-verify="required" placeholder="请输入联系人" autocomplete="off" class="layui-input">
        </script>
      </div>
    </div>
    <div class="layui-form-item">
      <label class="layui-form-label">联系电话</label>
      <div class="layui-input-inline">
        <script type="text/html" template>
          <input type="text" name="customerContactPhone" value="" lay-verify="phone" placeholder="请输入联系电话" autocomplete="off" class="layui-input">
        </script>
      </div>
    </div>

    <div class="layui-form-item">
      <label class="layui-form-label">联系地址</label>
      <div class="layui-input-inline">
        <script type="text/html" template>
          <input type="text" name="customerAddr" value="" lay-verify="required" placeholder="请输入地址" autocomplete="off" class="layui-input">
        </script>
      </div>
    </div>

    <div class="layui-form-item">
      <label class="layui-form-label">地址地图</label>
      <div class="layui-input-inline ">
           <input type="text" class="layui-input" disabled="" name="customerAddrImg" id="customerAddrImg"  >
      </div>
      <button  class="layui-btn layui-btn-primary findBack" bind-name="findMapImg" >查找</button >
      <button  class="layui-btn layui-btn-primary" layadmin-event="avartatPreview" bind-input='customerAddrImg'>预览</button>
    </div>
    <!-- <div class="layui-form-item">
      <label class="layui-form-label">LOGO</label>
      <div class="layui-input-inline " >
           <input type="text" class="imagePicker" name="customerLogo" id="customerLogo"  lay-filter="imagePicker" style="display:none;">
          
        <button  class="layui-btn layui-btn-primary" layadmin-event="avartatPreview" bind-input='customerLogo'>查看</button >

      </div>
    </div> -->
    <div class="layui-form-item">
      <label class="layui-form-label">LOGO</label>
      <div class="layui-input-inline " >
          <input type="text" class="layui-input" disabled="" name="customerLogo" id="customerLogo"  >
  
      </div>
      <button  class="layui-btn layui-btn-primary findBack" bind-name="findLogoImg" >查找</button >
      <button  class="layui-btn layui-btn-primary" layadmin-event="avartatPreview" bind-input='customerLogo'>预览</button>
    </div>
    <div class="layui-form-item">
      <label class="layui-form-label">邮编</label>
      <div class="layui-input-inline">
        <script type="text/html" template>
          <input type="text" name="customerMailCode" value="" lay-verify="required" placeholder="请输入邮编" autocomplete="off" class="layui-input">
        </script>
      </div>
    </div>
    <div class="layui-form-item">
      <label class="layui-form-label">内容样式</label>
      <div class="layui-input-inline">
        
        <div class="layui-input-inline">
        <div class="layui-input-inline" style="width: 120px;">
          <input type="text" readonly="readonly"  name="contentColorType" value="" placeholder="请选择颜色" class="layui-input" id="contentColorType">
        </div>
        <div class="layui-inline" style="left: -11px;">
          <div id="content_color_pick"></div>
        </div>
      </div>
      </div>
    </div>
    <div class="layui-form-item">
      <label class="layui-form-label">分列样式</label>
      <div class="layui-input-inline">
        <div class="layui-input-inline" style="width: 120px;">
          <input type="text" readonly="readonly" name="cellBackColor" value="" placeholder="请选择颜色" class="layui-input" id="cellBackColor">
        </div>
        <div class="layui-inline" style="left: -11px;">
          <div id="cell_color_pick"></div>
        </div>
      </div>
    </div>
    <div class="layui-form-item">
      <label class="layui-form-label">分列字体</label>
      <div class="layui-input-inline">
        <div class="layui-input-inline" style="width: 120px;">
          <input type="text" readonly="readonly" name="defaultTextColor" value="" placeholder="请选择颜色" class="layui-input" id="defaultTextColor">
        </div>
        <div class="layui-inline" style="left: -11px;">
          <div id="default_text_color"></div>
        </div>
      </div>
    </div>
    <div class="layui-form-item">
      <label class="layui-form-label">主题样式</label>
      <div class="layui-input-inline">
        <script type="text/html" template>
          <select name="themBackColor" id="themBackColor" lay-filter="selectThemBackColor">
                  <option value='1'  >淡泥土</option>
                  <option value='2'  >青花色</option>
                  <option value='3'  >海蓝色</option>
                  <option value='4'  >天蓝色</option>
         </select>
        </script>
      </div>
    </div>
    <div class="layui-form-item">
      <label class="layui-form-label">描述</label>
      <div class="layui-input-inline">
          <textarea name="customerDesc" lay-verify="required" style="width: 400px; height: 150px;" autocomplete="off" class="layui-textarea"></textarea>
      </div>
    </div>
    <div class="layui-form-item">
      <label class="layui-form-label"></label>
      <div class="layui-input-inline">
        <input type="button" lay-submit lay-filter="layuiadmin-app-form-submit" value="确认" class="layui-btn">
      </div>
    </div>
  </div>
  <script type="text/javascript" src="js/util/FindBack.js"></script>
<script type="text/javascript">
  layui.define([ 'imagePicker','colorpicker'], function(exports){
    var $ = layui.$
  ,layer = layui.layer
  ,admin=layui.admin
  ,colorpicker=layui.colorpicker
  ,imagePicker = layui.imagePicker;
   //表单赋值
  colorpicker.render({
    elem: '#cell_color_pick',
    color:'#590f5c'
    ,done: function(color){
      $('#cellBackColor').val(color).css('background-color',color);
    },change: function(color){
      $('#cellBackColor').val(color).css('background-color',color);
    }
  }); //表单赋值
  colorpicker.render({
    elem: '#default_text_color',
    color:'#590f5c'
    ,done: function(color){
      $('#defaultTextColor').val(color).css('background-color',color);
    },change: function(color){
      $('#defaultTextColor').val(color).css('background-color',color);
    }
  });
  colorpicker.render({
    elem: '#content_color_pick',
    color:'#590f5c'
    ,done: function(color){
      $('#contentColorType').val(color).css('background-color',color);
    },change: function(color){
      $('#contentColorType').val(color).css('background-color',color);
    }
  });
  //initimagepicker
  /* imagePicker.render({
      // 选择器，推荐使用input
      elem: '#customerLogo',
      // 数据类型：fontClass/unicode，推荐使用fontClass
      name: 'customerLogo',
      // 是否开启搜索：true/false，默认true
      search: true,
      // 是否开启分页：true/false，默认true
      page: true,
      // 每页显示数量，默认12
      limit: 8,
      // 每个图标格子的宽度：'43px'或'20%'
      cellWidth: '120px',
      cellHeight: '60px',
      // 渲染成功后的回调
      success: function(d) {
          console.log('加载成功');
      }
  });*/
   /*setTimeout(function(){
    if($('#customerLogo').val()){
      imagePicker.checkIcon('customerLogo');
    }
   },1000);*/
   /* imagePicker.render({
      // 选择器，推荐使用input
      elem: '#customerAddrImg',
      // 数据类型：fontClass/unicode，推荐使用fontClass
      name: 'customerAddrImg',
      // 是否开启搜索：true/false，默认true
      search: true,
      // 是否开启分页：true/false，默认true
      page: true,
      // 每页显示数量，默认12
      limit: 8,
      // 每个图标格子的宽度：'43px'或'20%'
      cellWidth: '120px',
      cellHeight: '60px',
      // 渲染成功后的回调
      success: function(d) {
          console.log('加载成功');
      }
  });*/
    var warequrl=layui.setter.backuprequesturl+'imgManager'+layui.setter.reqver;
      /*构建查找带回*/
      var addData={
          dateGroup:1,
          timeGroup:1,
          findMapImg:{search:[{name:'fileName',text:'图片名称',type:'0'}],cols:[
                    {type: 'checkbox', fixed: 'left', title: ''}
                    , {field: 'id', title: 'id', align: 'center', hide: true}
                    , {field: 'fileName', title: '图片名称', align: 'center',width:'90%'}
                ],url:warequrl+'/getImgManagerListByPage',datal:1,elem:'#customerAddrImg',calltype:0},
          findLogoImg:{search:[{name:'fileName',text:'图片名称',type:'0'}],cols:[
                    {type: 'checkbox', fixed: 'left', title: ''}
                    , {field: 'id', title: 'id', align: 'center', hide: true}
                    , {field: 'fileName', title: '图片名称', align: 'center',width:'90%'}
                ],url:warequrl+'/getImgManagerListByPage?sort=create_time&dir=desc',datal:1,elem:'#customerLogo',calltype:0}
      }

    var showSearchHtml='';
    showSearchHtml+='<div class="layui-inline">';
    showSearchHtml+='    <label class="layui-form-label">{{text}}</label>';
    showSearchHtml+='    <div class="layui-input-block">';
    showSearchHtml+='         <input type="text" name="{{name}}" placeholder="请输入{{text}}" autocomplete="off" class="layui-input">';
    showSearchHtml+='    </div>';
    showSearchHtml+='</div>';
    var getSeartHtml=function(searchD){
      if(!searchD){
        return '';
      }
      var reshtml='';
      for(var i=0;i<searchD.length;i++){
        if(searchD[i].type==0){
          reshtml+=showSearchHtml.replace(/{{text}}/g,searchD[i].text).replace(/{{name}}/g,searchD[i].name);
        }else if(searchD[i].type==1){
          
        }
      }
      return reshtml;
    }
      // 显示框框
    var showFindBack=function(name){
      var param=addData[name];
      FindBack.initTable({
        url:param.url,
        datal:param.datal||-1 ,// -1表示不限制
         elem:'findBack',
        layui:layui,
        searchHtml :getSeartHtml(param.search),
        where:function(field){
          return field;
              },
        cols:[param.cols],
             callback:function(data){
               if(param.calltype==0){
                 showType0Html(data[0],param.elem,name);
               }
              
             }
      }); 
    }

    var showType0Html=function(data,elem){
      $(elem).val(data.link);
    }

    $('.findBack').on('click',function(){
      if($(this).attr('bind-name')=='findMapImg'){
        showFindBack('findMapImg');
      }else{
        showFindBack('findLogoImg');
      }
    })

  /**
   * 选中图标 （常用于更新时默认选中图标）
   * @param filter lay-filter
   * @param iconName 图标名称，自动识别fontClass/unicode
   */
  /* setTimeout(function(){
    if($('#customerAddrImg').val()){
      imagePicker.checkIcon('customerAddrImg');
    }
   },1000);*/
  //查看头像
  admin.events.avartatPreview = function(othis){
    var src = $('#'+$(othis).attr('bind-input')).val();
    if(!src){
      layui.layer.msg('请先上传图片');
      return ;
    }
    if(src.indexOf('http:')==-1){
      src=layui.setter.backuprequesturl+src;
    }
    layer.photos({
      photos: {
        "title": "查看头像" //相册标题
        ,"data": [{
          "src": src //原图地址
        }]
      }
      ,shade: 0.01
      ,closeBtn: 1
      ,anim: 5
    });
  };
  })
</script>